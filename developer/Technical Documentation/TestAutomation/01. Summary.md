# Test Automation Summary

## How to run

E2E Tests can be started manually via GitHub Actions.

## Users for TestAutomation

For successful run of tests following users should exist in the corresponding environment:

* Test User (Portal) of Security-Company
* Technical User of TestAutomation Company
* Technical User for Interface Partner Health Check

Secrets (username and password) should be added to GitHub Secrets.

## Structure

E2E Tests are divided into two groups: tests for health check and functional tests. Below you can find a short
description of these tests. Detailed information is available in separate files with according names.

Base url for tests:

```
https://portal-backend.{env}.demo.catena-x.net/
```

where "env" defines environment specifics.

### Health Check Tests

Health check is needed to be executed to make sure that the appropriate endpoints are available and return a non-empty
response. It can be run separately or before functional tests.

#### [SystemHealthCheck](04.%20SystemHEalthCheck.md)

System health check is implemented for administration and registration services in order to check the load of static
data and availability of additional endpoints.

#### [InterfacePartnerHealthCheck](03.%20InterfacePArtnerHealthCheck.md)

Interface Partner Health Check is now implemented for BPDM, ClearingHouse, SdFactory and Wallet.

### Functional E2E Tests

Functional E2E tests are designed to check the behavior of an application under different scenarios. Following scenarios
were implemented:

#### [Registration scenarios](05.%20RegistrationScenarios.md)

Registration scenarios suppose to check if registration process runs as expected. The following scenarios were
implemented completely: registration without bpn, update of company detail data after confirmation, in-registration
invitation. Two scenarios (registration without bpn and registration without document upload) were partly implemented as
adjustments in productive code are needed.
Some additional scenarios can be added later. For example, validation of the right company detail data depending on the
selected country.

#### [Notification initial scenario](NotificationInitSceanrio.md)

Notification initial scenario checks if a new random portal role can be assigned and unassigned and if appropriate
notification, to the respective right person and with the correct content is created.

#### [Service Account CUD Scenarios](ServiceAccountCUDScenarios.md)

Create-Update-Delete Scenarios suppose to check if new service accounts can be correctly created, updated and deleted.

## Test Parametrization

Some tests are parameterized, which allow to run test scenarios with different data sets in one launch. The test data
files are json files with the lists of data objects. The structure of these files can be
found [here](08.%20TestDataFileSetup.md).

## ReportPortal

After running the tests, the results are sent to ReportPortal for better visualization. The specifics for running and configuring the ReportPortal are highlighted [here](10.%20ReportPortal.md).




